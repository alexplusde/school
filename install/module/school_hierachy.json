{"id":25,"key":"school.hierachy","name":"translate:school.module.hierarchy","output":"<?php\n\nuse Alexplusde\\BS5\\Helper;\n\n?>\n<section class=\"modul modul-organisation\" id=\"modul-REX_SLICE_ID\">\r\n\t<div class=\"wrapper\">\r\n\t\t<div class=\"modul-organisation-list\">\r\n\t\t\t<?= Helper::getBackendEditLink(); ?>\n\t\t\t<?php\n\n            $tags = rex_yform_manager_table::get('rex_school_team_tag')->query()->find();\n\nforeach ($tags as $tag) {\n    $person_fav = [];\n    $teachers = [];\n    $names = [];\n    $teachers = rex_sql::factory()->getArray(\"SELECT * FROM rex_school_team WHERE FIND_IN_SET(id, :ids)\", [\"ids\" => $tag->getValue(\"team_id\")]);\n    $person_fav = rex_sql::factory()->getArray(\"SELECT * FROM rex_school_team WHERE id = :id\", [\"id\" => $tag->getValue(\"team_id_fav\")]);\n    foreach ($teachers as $teacher) {\n        $names[] = $teacher['name'];\n    }\n\n    ?>\n\t\t\t<div class=\"team-orga-field\">\r\n\t\t\t\t<h2><?= $tag->getValue(\"name\") ?>\n\t\t\t\t\t<?php if ($person_fav) { ?>\n\t\t\t\t\t(<?= $person_fav[0][\"name\"] ?>)<?php } ?>\n\t\t\t\t<\/h2>\r\n                <?php if ($tag->getValue('article_id')) { ?>\n\t\t\t\t<div class=\"team-orga-link\"><a href=\"<?= rex_getUrl($tag->getValue('article_id')) ?>\">Weitere\r\n\t\t\t\t\t\tInformationen<\/a><\/div>\r\n                <?php } ?>\n\t\t\t\t<div class=\"team-orga-description\"><?= $tag->getValue('description') ?>\n\t\t\t\t\t<?php if (is_array($names)) { ?>\n\t\t\t\t\t<div class=\"team-orga-people\">\r\n\t\t\t\t\t\t<?= implode(\", \", $names) ?>\n\t\t\t\t\t<\/div>\r\n\t\t\t\t\t<?php } \/\/ is_array($names)?>\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t\t<?php } ?>\n\t\t<\/div>\r\n\t<\/div>\r\n<\/section>\r\n","input":"","createdate":"2017-11-29 11:44:58","createuser":"aw@alexplus.de","updatedate":"2024-12-10 21:18:27","updateuser":"mail@alexplus.de","attributes":null,"revision":0}